<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - Painel Admin | Açaí & Cia</title>
    <link rel="icon" type="image/x-icon" href="favicon.ico">
    <link rel="stylesheet" href="admin.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body class="dashboard-page">
    <!-- Header -->
    <header class="dashboard-header">
        <div class="header-content">
            <div class="header-left">
                <i class="fas fa-ice-cream"></i>
                <h1>Painel Admin - Açaí & Cia</h1>
            </div>
            <div class="header-right">
                <button id="settings-btn" class="btn-icon" title="Configurações">
                    <i class="fas fa-cog"></i>
                </button>
                <button id="logout-btn" class="btn-logout">
                    <i class="fas fa-sign-out-alt"></i>
                    Sair
                </button>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="dashboard-main">
        <div class="dashboard-container">
            
            <!-- Stats Cards -->
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-icon" style="background: #4CAF50;">
                        <i class="fas fa-check-circle"></i>
                    </div>
                    <div class="stat-info">
                        <h3 id="active-count">0</h3>
                        <p>Produtos Ativos</p>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon" style="background: #FF9800;">
                        <i class="fas fa-pause-circle"></i>
                    </div>
                    <div class="stat-info">
                        <h3 id="inactive-count">0</h3>
                        <p>Produtos Pausados</p>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon" style="background: #2196F3;">
                        <i class="fas fa-boxes"></i>
                    </div>
                    <div class="stat-info">
                        <h3 id="total-count">0</h3>
                        <p>Total de Produtos</p>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon" style="background: #9C27B0;">
                        <i class="fas fa-layer-group"></i>
                    </div>
                    <div class="stat-info">
                        <h3 id="category-count">0</h3>
                        <p>Categorias</p>
                    </div>
                </div>
            </div>

            <!-- Actions Bar -->
            <div class="actions-bar">
                <div class="search-box">
                    <i class="fas fa-search"></i>
                    <input type="text" id="search-input" placeholder="Buscar produtos...">
                </div>
                <div class="actions-buttons">
                    <button id="manage-categories-btn" class="btn-secondary">
                        <i class="fas fa-layer-group"></i>
                        Categorias
                    </button>
                    <button id="add-product-btn" class="btn-secondary">
                        <i class="fas fa-plus"></i>
                        Novo Produto
                    </button>
                    <button onclick="window.location.href='complementos.html'" class="btn-secondary" style="background: var(--info); color: white;">
                        <i class="fas fa-sliders-h"></i>
                        Complementos
                    </button>
                    <button id="reload-btn" class="btn-secondary">
                        <i class="fas fa-sync-alt"></i>
                        Recarregar
                    </button>
                    <button id="publish-btn" class="btn-publish" disabled>
                        <i class="fas fa-cloud-upload-alt"></i>
                        Publicar no GitHub
                    </button>
                </div>
            </div>

            <!-- Products List -->
            <div id="products-container" class="products-container">
                <div class="loading">
                    <i class="fas fa-spinner fa-spin"></i>
                    <p>Carregando produtos...</p>
                </div>
            </div>

        </div>
    </main>

    <!-- Modal de Criar/Editar Produto -->
    <div id="product-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2><i class="fas fa-box"></i> <span id="product-modal-title">Novo Produto</span></h2>
                <button class="modal-close" onclick="closeProductModal()">&times;</button>
            </div>
            <div class="modal-body">
                <input type="hidden" id="product-cat-index">
                <input type="hidden" id="product-item-index">
                
                <div class="form-group">
                    <label for="product-category">
                        <i class="fas fa-layer-group"></i>
                        Categoria
                    </label>
                    <select id="product-category" required>
                        <option value="">Selecione uma categoria</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="product-name">
                        <i class="fas fa-tag"></i>
                        Nome do Produto
                    </label>
                    <input type="text" id="product-name" placeholder="Ex: Açaí 500ml" required>
                </div>

                <div class="form-group">
                    <label for="product-description">
                        <i class="fas fa-align-left"></i>
                        Descrição
                    </label>
                    <textarea id="product-description" rows="4" placeholder="Descrição do produto..."></textarea>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="product-price-original">
                            <i class="fas fa-dollar-sign"></i>
                            Preço Original
                        </label>
                        <input type="number" id="product-price-original" step="0.01" placeholder="0.00">
                    </div>
                    <div class="form-group">
                        <label for="product-price-sale">
                            <i class="fas fa-tag"></i>
                            Preço de Venda *
                        </label>
                        <input type="number" id="product-price-sale" step="0.01" placeholder="0.00" required>
                    </div>
                </div>

                <div class="form-group">
                    <label for="product-serves">
                        <i class="fas fa-users"></i>
                        Serve quantas pessoas?
                    </label>
                    <input type="text" id="product-serves" placeholder="Ex: Serve 1 pessoa">
                </div>

                <div class="form-group">
                    <label for="product-image-url">
                        <i class="fas fa-image"></i>
                        URL da Imagem Externa
                    </label>
                    <input type="text" id="product-image-url" placeholder="https://...">
                </div>

                <div class="form-group">
                    <label for="product-image-local">
                        <i class="fas fa-folder"></i>
                        Caminho da Imagem Local
                    </label>
                    <input type="text" id="product-image-local" placeholder="imagens\\produto.jpg">
                </div>

                <div class="form-group">
                    <label>
                        <i class="fas fa-toggle-on"></i>
                        Status
                    </label>
                    <div style="display: flex; align-items: center; gap: 10px;">
                        <input type="checkbox" id="product-active" checked style="width: auto;">
                        <label for="product-active" style="margin: 0;">Produto Ativo</label>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button onclick="closeProductModal()" class="btn-secondary" style="margin-right: 10px;">
                    <i class="fas fa-times"></i> Cancelar
                </button>
                <button onclick="saveProduct()" class="btn-primary">
                    <i class="fas fa-save"></i> Salvar Produto
                </button>
            </div>
        </div>
    </div>

    <!-- Modal de Gerenciar Categorias -->
    <div id="categories-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2><i class="fas fa-layer-group"></i> Gerenciar Categorias</h2>
                <button class="modal-close" onclick="closeCategoriesModal()">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label>
                        <i class="fas fa-plus"></i>
                        Nova Categoria
                    </label>
                    <div style="display: flex; gap: 10px;">
                        <input type="text" id="new-category-name" placeholder="Nome da categoria">
                        <button onclick="addCategory()" class="btn-primary" style="width: auto; padding: 12px 20px;">
                            <i class="fas fa-plus"></i> Adicionar
                        </button>
                    </div>
                </div>

                <div class="form-group">
                    <label>
                        <i class="fas fa-list"></i>
                        Categorias Existentes
                    </label>
                    <div id="categories-list" style="max-height: 400px; overflow-y: auto;">
                        <!-- Categorias serão listadas aqui -->
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button onclick="closeCategoriesModal()" class="btn-primary">
                    <i class="fas fa-check"></i> Concluído
                </button>
            </div>
        </div>
    </div>

    <!-- Modal de Configurações -->
    <div id="settings-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2><i class="fas fa-cog"></i> Configurações do GitHub</h2>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label for="site-id">
                        <i class="fas fa-key"></i>
                        GitHub Personal Access Token
                    </label>
                    <input type="password" id="site-id" placeholder="ghp_...">
                    <small style="display: block; margin-top: 8px; color: #666;">
                        <strong>Como criar:</strong><br>
                        1. Acesse: <a href="https://github.com/settings/tokens" target="_blank" style="color: var(--primary);">github.com/settings/tokens</a><br>
                        2. Clique em "Generate new token (classic)"<br>
                        3. Marque a permissão <strong>"repo"</strong> (Full control)<br>
                        4. Cole o token aqui
                    </small>
                </div>
                <div class="form-group">
                    <label for="admin-password">
                        <i class="fas fa-lock"></i>
                        Alterar Senha do Painel
                    </label>
                    <input type="password" id="admin-password" placeholder="Nova senha (deixe em branco para manter)">
                    <small>Senha atual padrão: admin123</small>
                </div>
            </div>
            <div class="modal-footer">
                <button id="save-settings-btn" class="btn-primary">
                    <i class="fas fa-save"></i>
                    Salvar Configurações
                </button>
            </div>
        </div>
    </div>

    <!-- Configuração Global -->
    <script src="config.js"></script>
    
    <script src="admin-github.js"></script>
    <script src="admin-crud.js"></script>
</body>
</html>
